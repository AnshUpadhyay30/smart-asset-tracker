<h2 mat-dialog-title class="dlg-title">
  <span class="title-glyph" aria-hidden="true"><mat-icon>build_circle</mat-icon></span>
  <span>{{ data.mode === 'create' ? 'Add Maintenance Log' : 'Edit Maintenance Log' }}</span>
</h2>

<mat-dialog-content [formGroup]="form" class="dialog-body">
  <!-- Service date -->
  <mat-form-field appearance="outline" class="full">
    <mat-label>Service date*</mat-label>
    <input matInput [matDatepicker]="sd" formControlName="service_date" />
    <mat-datepicker-toggle matSuffix [for]="sd"></mat-datepicker-toggle>
    <mat-datepicker #sd></mat-datepicker>
    <mat-error *ngIf="form.controls.service_date.hasError('required')">
      Service date is required
    </mat-error>
  </mat-form-field>

  <!-- Description -->
  <mat-form-field appearance="outline" class="full">
    <mat-label>Description*</mat-label>
    <textarea matInput rows="3" formControlName="description" placeholder="What was serviced?"></textarea>
    <mat-error *ngIf="form.controls.description.hasError('required')">Description is required</mat-error>
  </mat-form-field>

  <!-- Parts used -->
  <mat-form-field appearance="outline" class="half">
    <mat-label>Parts used</mat-label>
    <input matInput formControlName="parts_used" placeholder="Comma separated (e.g., battery, fan)" />
  </mat-form-field>

  <!-- Cost -->
  <mat-form-field appearance="outline" class="half">
    <mat-label>Cost</mat-label>
    <input matInput type="number" min="0" step="1" formControlName="cost" />
  </mat-form-field>

  <!-- Next service due -->
  <mat-form-field appearance="outline" class="half">
    <mat-label>Next service due (optional)</mat-label>
    <input matInput [matDatepicker]="nd" formControlName="next_service_due" />
    <mat-datepicker-toggle matSuffix [for]="nd"></mat-datepicker-toggle>
    <mat-datepicker #nd></mat-datepicker>
  </mat-form-field>
</mat-dialog-content>

<mat-dialog-actions align="end" class="dialog-actions">
  <button mat-button class="btn-ghost" (click)="cancel()">Cancel</button>
  <button mat-flat-button color="primary" class="btn-primary"
          (click)="save()" [disabled]="form.invalid || submitting">
    {{ data.mode === 'create' ? 'Add Log' : 'Save Changes' }}
  </button>
</mat-dialog-actions>